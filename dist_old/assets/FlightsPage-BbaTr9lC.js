import{j as e,u as s,L as t}from"./index-BsIC7uMs.js";import{r as a}from"./vendor-DENY9G7l.js";import{S as i}from"./SearchBar-BXbs-UWX.js";import{C as l}from"./ConfirmDialog-CZgwmRZ1.js";import{P as r,X as n,a as c,e as o,b as d,S as x}from"./icons-C2lZ9bAH.js";import{m}from"./mockFlights-C4PXYdqg.js";import{f as h}from"./utils-DKsTS5kk.js";import"./router-DBkyO5U2.js";function g({isOpen:s,onClose:t,onConfirm:i,flightNumber:l}){const[c,o]=a.useState("Window");if(!s)return null;return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(r,{className:"h-6 w-6 text-blue-600"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Seat Preference"})]}),e.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(n,{className:"h-6 w-6"})})]}),e.jsxs("p",{className:"text-gray-600 mb-6",children:["Please select your seat preference for flight ",l,":"]}),e.jsx("div",{className:"space-y-3 mb-6",children:["Window","Aisle","Middle"].map(s=>e.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"seatPreference",value:s,checked:c===s,onChange:e=>o(e.target.value),className:"h-4 w-4 text-blue-600 focus:ring-blue-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"font-medium text-gray-900",children:[s," Seat"]}),e.jsxs("div",{className:"text-sm text-gray-600",children:["Window"===s&&"Great views and privacy","Aisle"===s&&"Easy access to restroom and overhead bins","Middle"===s&&"Budget-friendly option"]})]})]},s))}),e.jsxs("div",{className:"flex space-x-3 justify-end",children:[e.jsx("button",{onClick:t,className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:()=>{i(c),t()},className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:"Confirm Selection"})]})]})})})}function f(){const{state:n,dispatch:f}=s(),[u,p]=a.useState([]),[j,N]=a.useState(!1),[y,b]=a.useState(!1),[v,w]=a.useState({isOpen:!1,flight:null,action:"cart"}),[C,S]=a.useState({isOpen:!1,flight:null,action:"cart"}),O=(e,s)=>{const t={id:Math.random().toString(36).substr(2,9),type:"flight",item:e,quantity:1,selectedExtras:[{seatPreference:s}]};f({type:"ADD_TO_CART",payload:t}),f({type:"ADD_NOTIFICATION",payload:{message:`Flight ${e.flightNumber} with ${s} seat preference added to cart`,type:"success",read:!1}})},D=async(e,s)=>{const t={id:Math.random().toString(36).substr(2,9),type:"flight",item:e,bookingDate:(new Date).toISOString(),totalAmount:e.price,status:"confirmed",seatPreference:s};f({type:"ADD_BOOKING",payload:t}),f({type:"ADD_NOTIFICATION",payload:{message:`Flight ${e.flightNumber} booked successfully with ${s} seat preference!`,type:"success",read:!1}})};return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-blue-900 text-white py-16",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-4xl md:text-5xl font-bold mb-4",children:"Find Your Perfect Flight"}),e.jsx("p",{className:"text-xl text-blue-200",children:"Search hundreds of flights to find the best deals for your journey"})]})})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 -mt-8 relative z-10",children:e.jsx(i,{onSearch:async e=>{N(!0),b(!0),await new Promise(e=>setTimeout(e,1500));const s=[...n.customFlights,...m].filter(s=>s.origin.code===e.origin&&s.destination.code===e.destination&&s.cabinClass===e.cabinClass);p(s),N(!1)},type:"flights"})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:j?e.jsx(t,{}):y?e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-900",children:[u.length," flights found"]}),e.jsx("div",{className:"flex space-x-4",children:e.jsxs("select",{className:"border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{children:"Sort by Price"}),e.jsx("option",{children:"Sort by Duration"}),e.jsx("option",{children:"Sort by Departure Time"})]})})]}),u.length>0?e.jsx("div",{className:"space-y-4",children:u.map(s=>e.jsx("div",{className:"bg-white rounded-lg shadow-md hover:shadow-lg transition-shadow",children:e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(r,{className:"h-6 w-6 text-blue-600"}),e.jsx("span",{className:"font-semibold text-lg",children:s.flightNumber})]}),e.jsx("span",{className:"text-gray-500",children:s.airline}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(c,{className:"h-4 w-4 text-yellow-400 fill-current"}),e.jsx("span",{className:"text-sm text-gray-600",children:"4.5"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-3xl font-bold text-blue-600",children:["Rs. ",s.price]}),e.jsx("div",{className:"text-sm text-gray-500",children:"per person"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-500",children:"From"}),e.jsx("div",{className:"font-semibold",children:s.origin.code}),e.jsx("div",{className:"text-sm text-gray-600",children:s.origin.city}),e.jsx("div",{className:"text-lg font-mono",children:h(new Date(s.departureTime),"HH:mm")})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-sm text-gray-500 mb-2",children:"Duration"}),e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx(o,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"font-medium",children:s.duration})]}),e.jsx("div",{className:"text-sm text-gray-600 mt-1",children:0===s.stops?"Non-stop":`${s.stops} stop(s)`})]}),e.jsxs("div",{className:"text-right md:text-left",children:[e.jsx("div",{className:"text-sm text-gray-500",children:"To"}),e.jsx("div",{className:"font-semibold",children:s.destination.code}),e.jsx("div",{className:"text-sm text-gray-600",children:s.destination.city}),e.jsx("div",{className:"text-lg font-mono",children:h(new Date(s.arrivalTime),"HH:mm")})]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm text-gray-600 mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(d,{className:"h-4 w-4"}),e.jsxs("span",{children:[s.availableSeats," seats available"]})]}),e.jsxs("div",{children:["Aircraft: ",s.aircraft]}),e.jsx("div",{className:"px-2 py-1 bg-blue-100 text-blue-800 rounded-full text-xs",children:s.cabinClass})]})]}),e.jsx("div",{className:"mt-4 lg:mt-0 lg:ml-6",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("button",{onClick:()=>(e=>{w({isOpen:!0,flight:e,action:"buy"})})(s),className:"w-full lg:w-auto bg-green-600 hover:bg-green-700 text-white px-8 py-3 rounded-lg font-semibold transition-colors flex items-center justify-center space-x-2",children:[e.jsx(r,{className:"h-5 w-5"}),e.jsx("span",{children:"Buy Now"})]}),e.jsxs("button",{onClick:()=>(e=>{w({isOpen:!0,flight:e,action:"cart"})})(s),className:"w-full lg:w-auto bg-blue-600 hover:bg-blue-700 text-white px-8 py-3 rounded-lg font-semibold transition-colors flex items-center justify-center space-x-2",children:[e.jsx(x,{className:"h-5 w-5"}),e.jsx("span",{children:"Add to Cart"})]})]})})]})})},s.id))}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(r,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-medium text-gray-900 mb-2",children:"No flights found"}),e.jsx("p",{className:"text-gray-600",children:"Try adjusting your search criteria or selecting different dates."})]})]}):e.jsxs("div",{className:"text-center py-16",children:[e.jsx(r,{className:"h-20 w-20 text-gray-300 mx-auto mb-6"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Ready to fly?"}),e.jsx("p",{className:"text-gray-600 text-lg",children:"Use the search form above to find flights to your destination."})]})}),e.jsx(l,{isOpen:v.isOpen,title:"cart"===v.action?"Add to Cart":"Buy Now",message:v.flight?`Are you sure you want to ${"cart"===v.action?"add":"book"} flight ${v.flight.flightNumber} from ${v.flight.origin.code} to ${v.flight.destination.code}?`:"",confirmText:"cart"===v.action?"Add to Cart":"Buy Now",onConfirm:()=>{v.flight&&S({isOpen:!0,flight:v.flight,action:v.action}),w({isOpen:!1,flight:null,action:"cart"})},onCancel:()=>w({isOpen:!1,flight:null,action:"cart"}),type:"cart"===v.action?"info":"success"}),e.jsx(g,{isOpen:C.isOpen,onClose:()=>S({isOpen:!1,flight:null,action:"cart"}),onConfirm:e=>{C.flight&&("cart"===C.action?O(C.flight,e):D(C.flight,e))},flightNumber:C.flight?.flightNumber||""})]})}export{f as FlightsPage};
