import{u as e,j as s}from"./index-BsIC7uMs.js";import{r as t}from"./vendor-DENY9G7l.js";import{S as a,o as r,p as i,q as l,r as c,s as n,C as d,H as o,P as x}from"./icons-C2lZ9bAH.js";import{u as m}from"./router-DBkyO5U2.js";function h(){const{state:h,dispatch:u}=e(),p=m(),[g,y]=t.useState(!1),j=(e,s)=>{u(0===s?{type:"REMOVE_FROM_CART",payload:e}:{type:"UPDATE_CART_QUANTITY",payload:{id:e,quantity:s}})},b=e=>{switch(e.type){case"flight":case"product":return e.item.price;case"hotel":return e.item.pricePerNight;case"car":return e.item.pricePerDay;default:return 0}},N=e=>{switch(e){case"flight":return s.jsx(x,{className:"h-6 w-6"});case"hotel":return s.jsx(o,{className:"h-6 w-6"});case"car":return s.jsx(d,{className:"h-6 w-6"});default:return s.jsx(n,{className:"h-6 w-6"})}},f=e=>{switch(e.type){case"flight":return`${e.item.flightNumber} - ${e.item.origin.code} to ${e.item.destination.code}`;case"hotel":case"product":return e.item.name;case"car":return`${e.item.brand} ${e.item.model}`;default:return"Unknown Item"}},v=e=>{switch(e.type){case"flight":const s=e.item;return`${s.airline} - ${s.cabinClass} - ${s.duration}`;case"hotel":const t=e.item;return`${t.location} - ${t.rating} stars`;case"car":const a=e.item;return`${a.type} - ${a.pickupLocation}`;case"product":return e.item.description;default:return""}},w=h.cart.reduce((e,s)=>e+b(s)*s.quantity,0),C=.1*w,k=w+C,R=async()=>{h.currentUser?(y(!0),await new Promise(e=>setTimeout(e,2e3)),h.cart.forEach(e=>{const s={id:Math.random().toString(36).substr(2,9),type:e.type,item:e.item,bookingDate:(new Date).toISOString(),totalAmount:b(e)*e.quantity,status:"confirmed"};u({type:"ADD_BOOKING",payload:s})}),u({type:"CLEAR_CART"}),u({type:"ADD_NOTIFICATION",payload:{message:"Payment successful! Your bookings have been confirmed.",type:"success",read:!1}}),y(!1),p("/cockpit")):p("/login")};return 0===h.cart.length?s.jsx("div",{className:"min-h-screen bg-gray-50",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16",children:s.jsxs("div",{className:"text-center",children:[s.jsx(a,{className:"h-20 w-20 text-gray-300 mx-auto mb-6"}),s.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Your cart is empty"}),s.jsx("p",{className:"text-gray-600 text-lg mb-8",children:"Start planning your trip by adding flights, hotels, or other travel essentials."}),s.jsx("button",{onClick:()=>p("/flights"),className:"bg-blue-600 hover:bg-blue-700 text-white px-8 py-3 rounded-lg font-semibold transition-colors",children:"Browse Flights"})]})})}):s.jsx("div",{className:"min-h-screen bg-gray-50",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[s.jsxs("div",{className:"mb-8",children:[s.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center space-x-2",children:[s.jsx(a,{className:"h-8 w-8"}),s.jsx("span",{children:"Shopping Cart"})]}),s.jsxs("p",{className:"text-gray-600 mt-2",children:[h.cart.length," items in your cart"]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[s.jsx("div",{className:"lg:col-span-2 space-y-4",children:h.cart.map(e=>s.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:s.jsxs("div",{className:"flex items-start space-x-4",children:[s.jsx("div",{className:"flex-shrink-0 bg-blue-100 p-3 rounded-lg text-blue-600",children:N(e.type)}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:f(e)}),s.jsx("p",{className:"text-gray-600 mt-1",children:v(e)}),s.jsx("div",{className:"mt-2",children:s.jsx("span",{className:"inline-block px-2 py-1 text-xs bg-gray-100 text-gray-600 rounded-full capitalize",children:e.type})})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("div",{className:"text-xl font-bold text-gray-900",children:["Rs. ",b(e)*e.quantity]}),s.jsxs("div",{className:"text-sm text-gray-500",children:["Rs. ",b(e)," each"]})]})]}),s.jsxs("div",{className:"flex items-center justify-between mt-4",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("button",{onClick:()=>j(e.id,e.quantity-1),className:"p-1 hover:bg-gray-100 rounded transition-colors",children:s.jsx(r,{className:"h-4 w-4"})}),s.jsx("span",{className:"px-3 py-1 bg-gray-100 rounded text-center font-medium",children:e.quantity}),s.jsx("button",{onClick:()=>j(e.id,e.quantity+1),className:"p-1 hover:bg-gray-100 rounded transition-colors",children:s.jsx(i,{className:"h-4 w-4"})})]}),s.jsxs("button",{onClick:()=>{return s=e.id,u({type:"REMOVE_FROM_CART",payload:s}),void u({type:"ADD_NOTIFICATION",payload:{message:"Item removed from cart",type:"info",read:!1}});var s},className:"text-red-600 hover:text-red-700 p-2 hover:bg-red-50 rounded transition-colors flex items-center space-x-1",children:[s.jsx(l,{className:"h-4 w-4"}),s.jsx("span",{children:"Remove"})]})]})]})]})},e.id))}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 h-fit",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Order Summary"}),s.jsxs("div",{className:"space-y-3 border-b border-gray-200 pb-4 mb-4",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Subtotal"}),s.jsxs("span",{className:"font-medium",children:["Rs. ",w.toFixed(2)]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Taxes & Fees"}),s.jsxs("span",{className:"font-medium",children:["Rs. ",C.toFixed(2)]})]})]}),s.jsxs("div",{className:"flex justify-between text-xl font-bold text-gray-900 mb-6",children:[s.jsx("span",{children:"Total"}),s.jsxs("span",{children:["Rs. ",k.toFixed(2)]})]}),s.jsxs("div",{className:"space-y-3",children:[h.currentUser&&s.jsxs("button",{onClick:async()=>{h.currentUser?await R():p("/login")},disabled:g,className:"w-full bg-green-600 hover:bg-green-700 text-white py-3 px-6 rounded-lg font-semibold transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2",children:[s.jsx(c,{className:"h-5 w-5"}),s.jsx("span",{children:"Express Checkout"})]}),s.jsxs("button",{onClick:R,disabled:g,className:"w-full bg-blue-600 hover:bg-blue-700 text-white py-3 px-6 rounded-lg font-semibold transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2",children:[s.jsx(c,{className:"h-5 w-5"}),s.jsx("span",{children:g?"Processing...":"Proceed to Checkout"})]})]}),!h.currentUser&&s.jsxs("p",{className:"text-sm text-gray-600 mt-3 text-center",children:[s.jsx("button",{onClick:()=>p("/login"),className:"text-blue-600 hover:text-blue-700 underline",children:"Sign in"})," ","to access Express Checkout"]}),s.jsxs("div",{className:"mt-6 pt-4 border-t border-gray-200",children:[s.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"Need Help?"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Contact our support team 24/7 for assistance with your booking."})]})]})]})]})})}export{h as CartPage};
